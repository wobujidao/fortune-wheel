# ๐ฐ ะะพะปะตัะพ ะคะพัััะฝั โ ะฆะ ะะ

<p align="center">
  <img src="assets/bot-avatar.png" width="160" alt="ะะพะปะตัะพ ะคะพัััะฝั" />
</p>

<p align="center">
  <img src="https://img.shields.io/badge/Python-3.13+-3776AB?style=for-the-badge&logo=python&logoColor=white" />
  <img src="https://img.shields.io/badge/Telegram-Mini%20App-26A5E4?style=for-the-badge&logo=telegram&logoColor=white" />
  <img src="https://img.shields.io/badge/FastAPI-009688?style=for-the-badge&logo=fastapi&logoColor=white" />
  <img src="https://img.shields.io/badge/SQLAlchemy-2.0-D71F00?style=for-the-badge&logo=sqlalchemy&logoColor=white" />
  <img src="https://img.shields.io/badge/Docker-2496ED?style=for-the-badge&logo=docker&logoColor=white" />
  <img src="https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white" />
  <img src="https://img.shields.io/badge/SQLite-003B57?style=for-the-badge&logo=sqlite&logoColor=white" />
  <img src="https://img.shields.io/badge/Canvas%20API-F7DF1E?style=for-the-badge&logo=javascript&logoColor=black" />
  <img src="https://img.shields.io/badge/Ruff-30173D?style=for-the-badge&logo=ruff&logoColor=white" />
  <img src="https://img.shields.io/badge/Pydantic-v2-E92063?style=for-the-badge&logo=pydantic&logoColor=white" />
</p>

Telegram Mini App โ ะธะฝัะตัะฐะบัะธะฒะฝะพะต ยซะะพะปะตัะพ ะคะพัััะฝัยป ะดะปั ัะพัััะดะฝะธะบะพะฒ ะฆะ ะะ (ะฆะตะฝััะฐะปัะฝะพะณะพ ะัะดะถะตัะฝะพะณะพ ะฃะฟัะฐะฒะปะตะฝะธั ะะพัะบะพะฒัะบะพะน ะะฑะปะฐััะธ) ะบ ะฟัะฐะทะดะฝะธะบั 23 ะคะตะฒัะฐะปั.

- ๐ Telegram Mini App: [@fortune_cbmo_bot](https://t.me/fortune_cbmo_bot)
- ๐ ะะพะผะตะฝ: [fortune.demidov.info](https://fortune.demidov.info)

> **ะัะพะตะบั ะดะพะปะณะพััะพัะฝัะน** โ ัะฐัััะธัะฐะฝ ะฝะฐ ะตะถะตะณะพะดะฝะพะต ะธัะฟะพะปัะทะพะฒะฐะฝะธะต ั ะฟะพะปะฝัะผ ัะฟัะฐะฒะปะตะฝะธะตะผ ะฟัะธะทะฐะผะธ, ัะฑัะพัะพะผ ะธ ะฟะตัะตะฝะฐัััะพะนะบะพะน ัะตัะตะท ะฒะตะฑ-ะฐะดะผะธะฝะบั.

---

## ๐ ะะฟะธัะฐะฝะธะต

Telegram Mini App, ะฒ ะบะพัะพัะพะผ ัะพัััะดะฝะธะบะธ ะบััััั ะบะพะปะตัะพ ัะพัััะฝั ะธ ะฟะพะปััะฐัั ะณะฐัะฐะฝัะธัะพะฒะฐะฝะฝัะน ะฟะพะดะฐัะพะบ โ ะพะดะธะฝ ะธะท ะฑะพะฝััะพะฒ ะบ ัะฐะฑะพัะตะผั ะณัะฐัะธะบั. ะะตะทัะปััะฐั ะผะพะถะฝะพ ะฟะพะบะฐะทะฐัั ััะบะพะฒะพะดะธัะตะปั ะธ ะฒะพัะฟะพะปัะทะพะฒะฐัััั ะฟะพะดะฐัะบะพะผ ะฒ ะปัะฑะพะน ัะฐะฑะพัะธะน ะดะตะฝั ะดะพ 23 ัะตะฒัะฐะปั ัะปะตะดัััะตะณะพ ะณะพะดะฐ. Telegram-ะฑะพั ัะปัะถะธั ัะพัะบะพะน ะฒัะพะดะฐ ะดะปั ะทะฐะฟััะบะฐ Mini App.

---

## ๐ ะัะธะทั (ัะตะบัะพัั ะบะพะปะตัะฐ)

ะัะธะทั ะฝะฐัััะฐะธะฒะฐัััั ะดะธะฝะฐะผะธัะตัะบะธ ัะตัะตะท ะฒะตะฑ-ะฐะดะผะธะฝะบั. ะะฐะฑะพั ะฟะพ ัะผะพะปัะฐะฝะธั:

| โ | ะัะธะท | ะะบะพะฝะบะฐ | ะฆะฒะตั |
|:-:|------|:------:|------|
| 1 | 3-ัะฐัะพะฒะพะน ะฟะตัะตััะฒ ะฝะฐ ะพะฑะตะด | ๐ฝ๏ธ | `#4A90D9` |
| 2 | ะะตะฝั ะพัะดััะฐ ะฒ ะฒะฐั ะะ (ะดะพ/ะฟะพัะปะต, ะตัะปะธ ะะ ะฒัะฟะฐะดะฐะตั ะฝะฐ ะฒััะพะดะฝะพะน) | ๐ | `#E8734A` |
| 3 | ะะฐะฒะตััะตะฝะธะต ัะฐะฑะพัั ะฝะฐ 2 ัะฐัะฐ ัะฐะฝััะต | โฐ | `#F5C242` |
| 4 | ะะพะฟะพะปะฝะธัะตะปัะฝัะน ะฒััะพะดะฝะพะน | ๐ด | `#D95B5B` |
| 5 | ะะฐัะฐะปะพ ัะฐะฑะพัั ะฝะฐ 2 ัะฐัะฐ ะฟะพะทะถะต | ๐ด | `#5BBD8C` |
| 6 | ะะฐะฒะตััะตะฝะธะต ัะฐะฑะพัั ะฒ ะพะฑะตะด (ะฒ 14:00) | ๐ | `#9B6EC5` |

> ะะตัะพััะฝะพััะธ: ะฒัะต ัะตะบัะพัั ัะฐะฒะฝะพะฒะตัะพััะฝั.

---

## ๐ ะขะตัะฝะธัะตัะบะพะต ะทะฐะดะฐะฝะธะต

### ะัะฝะพะฒะฝะฐั ะผะตัะฐะฝะธะบะฐ

1. ะะพะปัะทะพะฒะฐัะตะปั ะพัะบััะฒะฐะตั ะฑะพัะฐ ะฒ Telegram โ ะฝะฐะถะธะผะฐะตั ะบะฝะพะฟะบั โ ะพัะบััะฒะฐะตััั Mini App ั ะบะพะปะตัะพะผ.
2. ะะพะปะตัะพ ัััะพะธััั ะดะธะฝะฐะผะธัะตัะบะธ ะฟะพ ะดะฐะฝะฝัะผ ะธะท API (`GET /api/prizes`).
3. ะะฐะถะธะผะฐะตั ยซะัะฟััะฐะน ัะดะฐัั!ยป โ ะบะพะปะตัะพ ะบัััะธััั ั ะฐะฝะธะผะฐัะธะตะน โ ะฒัะฟะฐะดะฐะตั ะฟัะธะท.
4. ะะพะบะฐะทัะฒะฐะตััั ะผะพะดะฐะปัะฝะพะต ะพะบะฝะพ ั ะฟะพะทะดัะฐะฒะปะตะฝะธะตะผ ะธ ะฝะฐะทะฒะฐะฝะธะตะผ ะฟัะธะทะฐ.
5. ะะพัะปะต ะทะฐะบัััะธั ะผะพะดะฐะปะบะธ ะพัะพะฑัะฐะถะฐะตััั ัะตะทัะปััะฐั โ ะบะฐะบะพะน ะฟัะธะท ะฒัะฟะฐะป.

### ะะพะปะธัะตััะฒะพ ะฟะพะฟััะพะบ

- **ะะดะฝะฐ ะฟะพะฟััะบะฐ** ะฝะฐ ะฟะพะปัะทะพะฒะฐัะตะปั ะดะพ ะฟะพะปะฝะพะณะพ ัะฑัะพัะฐ.
- ะัะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั ัะถะต ะบัััะธะป โ ะพัะพะฑัะฐะถะฐะตััั ัะพะพะฑัะตะฝะธะต ยซะั ัะถะต ะธัะฟััะฐะปะธ ัะดะฐััยป ะธ ะตะณะพ ะฟัะธะท.
- ะะพะฒัะพัะฝะพะต ะฒัะฐัะตะฝะธะต ะดะพัััะฟะฝะพ **ัะพะปัะบะพ ะฟะพัะปะต ะฟะพะปะฝะพะณะพ ัะฑัะพัะฐ** ัะตัะตะท ะฐะดะผะธะฝะบั.

### ะกัะพะบ ะดะตะนััะฒะธั ะฟัะธะทะฐ

- ะะพะดะฐัะบะพะผ ะผะพะถะฝะพ ะฒะพัะฟะพะปัะทะพะฒะฐัััั ะฒ ะปัะฑะพะน ัะฐะฑะพัะธะน ะดะตะฝั ะดะพ 23 ัะตะฒัะฐะปั ัะปะตะดัััะตะณะพ ะณะพะดะฐ.
- ะกะพัััะดะฝะธะบ ะฟะพะบะฐะทัะฒะฐะตั ัะตะทัะปััะฐั (ัะบัะธะฝัะพั ะธะท Mini App) ัะฒะพะตะผั ััะบะพะฒะพะดะธัะตะปั ะธ ัะพะณะปะฐัะพะฒัะฒะฐะตั ะดะฐัั/ะฒัะตะผั.

### ะะพะณะธัะพะฒะฐะฝะธะต ัะตะทัะปััะฐัะพะฒ

ะะฑัะทะฐัะตะปัะฝะพะต ัะพััะฐะฝะตะฝะธะต ะฒ ะะ:

- Telegram User ID
- Username (`@username`)
- ะะผั ะธ ัะฐะผะธะปะธั ะธะท Telegram-ะฟัะพัะธะปั
- ะัะฟะฐะฒัะธะน ะฟัะธะท (ะฝะพะผะตั ะธ ัะตะบัั)
- ะะฐัะฐ ะธ ะฒัะตะผั ะฒัะฐัะตะฝะธั

### ะะฒัะพัะธะทะฐัะธั

- **ะะตั ะฑะตะปะพะณะพ ัะฟะธัะบะฐ** ัะพัััะดะฝะธะบะพะฒ โ ะดะพัััะฟ ัะตัะตะท ัััะปะบั ะฝะฐ ะฑะพัะฐ.
- ะกััะปะบั ะฟะพะปััะฐั ัะพะปัะบะพ ัะพัััะดะฝะธะบะธ ัะตัะตะท ะฒะฝัััะตะฝะฝะธะต ะบะฐะฝะฐะปั.
- ะะดะตะฝัะธัะธะบะฐัะธั ะฟะพะปัะทะพะฒะฐัะตะปั ัะตัะตะท Telegram WebApp `initData`.

---

## ๐ง ะะตะฑ-ะฐะดะผะธะฝะบะฐ

ะัะดะตะปัะฝะฐั ะฒะตะฑ-ัััะฐะฝะธัะฐ (`/admin`), ะดะพัััะฟ ะฟะพ Telegram-ะฐะฒัะพัะธะทะฐัะธะธ.

### ะะพะปะธ

| ะะพะปั | ะะพะทะผะพะถะฝะพััะธ |
|------|-------------|
| **ะะดะผะธะฝ** | ะะพะปะฝัะน ะดะพัััะฟ: ัะฟัะฐะฒะปะตะฝะธะต ะฟัะธะทะฐะผะธ, ัะตะทัะปััะฐัะฐะผะธ, ะฟะพะปัะทะพะฒะฐัะตะปัะผะธ, ัะฑัะพั |
| **ะัะพัะผะพัััะธะบ** | ะขะพะปัะบะพ ะฟัะพัะผะพัั ัะตะทัะปััะฐัะพะฒ |

### ะฃะฟัะฐะฒะปะตะฝะธะต ะฟัะธะทะฐะผะธ

- โ ะะพะฑะฐะฒะธัั ะฟัะธะท (ัะตะบัั, ะธะบะพะฝะบะฐ-ัะผะพะดะทะธ, ัะฒะตั)
- โ๏ธ ะะตะดะฐะบัะธัะพะฒะฐัั ัััะตััะฒัััะธะน ะฟัะธะท
- ๐๏ธ ะฃะดะฐะปะธัั ะฟัะธะท
- ๐ ะะตะฝััั ะฟะพััะดะพะบ ัะตะบัะพัะพะฒ (drag & drop)
- ๐๏ธ ะัะตะดะฟัะพัะผะพัั ะบะพะปะตัะฐ ั ัะตะบััะธะผะธ ะฝะฐัััะพะนะบะฐะผะธ
- ะะพะดะดะตัะถะบะฐ ะพั 2 ะดะพ 12 ัะตะบัะพัะพะฒ

### ะฃะฟัะฐะฒะปะตะฝะธะต ัะตะทัะปััะฐัะฐะผะธ

- ๐ ะขะฐะฑะปะธัะฐ ัะตะทัะปััะฐัะพะฒ (ะบัะพ, ััะพ, ะบะพะณะดะฐ, Telegram-ะดะฐะฝะฝัะต)
- ๐ ะะพะธัะบ ะธ ัะธะปัััะฐัะธั
- ๐๏ธ ะฃะดะฐะปะตะฝะธะต ะพัะดะตะปัะฝัั ะทะฐะฟะธัะตะน
- ๐ ะะพะปะฝัะน ัะฑัะพั ะฑะฐะทั (ะฒัะต ะฟะพะปัะทะพะฒะฐัะตะปะธ ะผะพะณัั ะบัััะธัั ะทะฐะฝะพะฒะพ)
- ๐ฅ ะญะบัะฟะพัั ัะตะทัะปััะฐัะพะฒ ะฒ CSV

### ะฃะฟัะฐะฒะปะตะฝะธะต ะดะพัััะฟะพะผ

- ๐ค ะะพะฑะฐะฒะปะตะฝะธะต / ัะดะฐะปะตะฝะธะต ะฐะดะผะธะฝะพะฒ (ะฟะพ Telegram ID)
- ๐๏ธ ะะพะฑะฐะฒะปะตะฝะธะต / ัะดะฐะปะตะฝะธะต ะฟัะพัะผะพัััะธะบะพะฒ (ะฟะพ Telegram ID)
- ๐ ะกะฟะธัะพะบ ัะตะบััะธั ะฐะดะผะธะฝะพะฒ ะธ ะฟัะพัะผะพัััะธะบะพะฒ

---

## ๐จ ะะธะทะฐะนะฝ ะบะพะปะตัะฐ

- ะขัะผะฝัะน ัะพะฝ ั ะผะตััะฐััะธะผะธ ะทะฒัะทะดะฐะผะธ
- ะะพะปะตัะพ ั ัะฒะตัะฝัะผะธ ัะตะบัะพัะฐะผะธ, ะฝะพะผะตัะฐ ะฒ ะฑะตะปัั ะบััะถะบะฐั
- ะัะฐัะฝะฐั ะพะบะฐะฝัะพะฒะบะฐ ั ะผะธะณะฐััะธะผะธ ะปะฐะผะฟะพัะบะฐะผะธ (ะฑะตะณััะธะน ะพะณะพะฝั)
- ะะพะปะพัะพะน ัะตะฝััะฐะปัะฝัะน ัะฐะฑ
- ะะพะปะพัะฐั ัััะตะปะบะฐ-ัะบะฐะทะฐัะตะปั ัะฒะตััั (ะพัััะธั ะบ ัะตะฝััั)
- ะะตะณะตะฝะดะฐ ั ัะฐััะธััะพะฒะบะพะน ะฝะพะผะตัะพะฒ ะฟะพะด ะบะพะปะตัะพะผ
- ะะพะฝัะตััะธ ะฟัะธ ะฒัะธะณัััะต
- ะะดะฐะฟัะธะฒะฝัะน ะดะธะทะฐะนะฝ ะฟะพะด ะผะพะฑะธะปัะฝัะต ััััะพะนััะฒะฐ
- ะะพะปะตัะพ ัััะพะธััั ะดะธะฝะฐะผะธัะตัะบะธ โ ะบะพะปะธัะตััะฒะพ ัะตะบัะพัะพะฒ, ัะฒะตัะฐ ะธ ัะตะบััั ะทะฐะณััะถะฐัััั ะธะท API

---

## ๐ ะะฝััะฐััััะบัััะฐ

### ะกะตัะตะฒะฐั ััะตะผะฐ

```mermaid
graph LR
    A[๐ ะะฝัะตัะฝะตั] -->|ะฟะพััั 80 / 443| B[๐ MikroTik<br/>95.165.142.229]
    B -->|NAT| C[๐ Nginx Proxy Manager<br/>192.168.5.4]
    C -->|fortune.demidov.info<br/>reverse proxy| D[๐ณ cbmo-fortune<br/>192.168.5.11:8000]
    E[๐ฑ Telegram API] <-->|webhook / polling| D

    subgraph Proxmox
        C
        D[๐ณ Ubuntu 24.04 LXC<br/>192.168.5.11]
    end
```

### ะกะตัะฒะตัะฝัะต ะดะฐะฝะฝัะต

| ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
|----------|----------|
| ะะพะผะตะฝ | `fortune.demidov.info` |
| ะะฝะตัะฝะธะน IP | `95.165.142.229` |
| ะะพััะตั | MikroTik (NAT: ะฟะพััั 80, 443) |
| Reverse Proxy | Nginx Proxy Manager (`192.168.5.4`) |
| ะกะตัะฒะตั ะฟัะธะปะพะถะตะฝะธั | Ubuntu 24.04 LXC (`192.168.5.11`) |
| SSL | Let's Encrypt (ัะตัะตะท Nginx Proxy Manager) |
| Docker | 28.2.2 + Compose 2.37.1 |
| ะะพะปัะทะพะฒะฐัะตะปั ะะก | `wobujidao` |

### ะะฐัััะพะนะบะฐ Nginx Proxy Manager

| ะะฐัะฐะผะตัั | ะะฝะฐัะตะฝะธะต |
|----------|----------|
| Domain | `fortune.demidov.info` |
| Scheme | `http` |
| Forward IP | `192.168.5.11` |
| Forward Port | `8000` |
| SSL | Let's Encrypt |
| Websockets | ะฒะบะปััะตะฝะพ |

---

## ๐๏ธ ะััะธัะตะบัััะฐ

### ะกัะตะบ ัะตัะฝะพะปะพะณะธะน

| ะะพะผะฟะพะฝะตะฝั | ะขะตัะฝะพะปะพะณะธั |
|-----------|-----------|
| Frontend | HTML5 + CSS3 + JavaScript (Canvas API) |
| Backend | Python 3.13+ |
| Telegram Bot | aiogram 3.x |
| API | FastAPI + Pydantic v2 |
| ะะ | SQLite + aiosqlite + SQLAlchemy 2.0 (async) |
| Web-ัะตัะฒะตั | Nginx (reverse proxy + SSL + ััะฐัะธะบะฐ) |
| ะะตะฟะปะพะน | Docker + Docker Compose |
| ะะฒัะพัะธะทะฐัะธั | Telegram WebApp initData (HMAC-SHA256) |
| ะะธะฝัะตั | Ruff |
| ะขะธะฟะธะทะฐัะธั | ะะพะปะฝะฐั ะฐะฝะฝะพัะฐัะธั ัะธะฟะพะฒ |

### ะกัััะบัััะฐ ะฟัะพะตะบัะฐ

```
fortune-wheel/
โโโ docker-compose.yml
โโโ .env                        # ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั (ะฝะต ะฒ git)
โโโ .env.example                # ะจะฐะฑะปะพะฝ ะฟะตัะตะผะตะฝะฝัั
โโโ .gitignore
โโโ README.md
โ
โโโ assets/
โ   โโโ bot-avatar.svg          # ะะฒะฐัะฐัะบะฐ ะฑะพัะฐ (ะธััะพะดะฝะธะบ)
โ   โโโ bot-avatar.png          # ะะฒะฐัะฐัะบะฐ ะฑะพัะฐ (ะดะปั BotFather)
โ
โโโ frontend/
โ   โโโ index.html              # Mini App โ ะบะพะปะตัะพ ัะพัััะฝั
โ   โโโ admin.html              # ะะตะฑ-ะฐะดะผะธะฝะบะฐ
โ
โโโ bot/
โ   โโโ __init__.py
โ   โโโ Dockerfile
โ   โโโ requirements.txt
โ   โโโ main.py                 # ะขะพัะบะฐ ะฒัะพะดะฐ: ะฑะพั + FastAPI
โ   โโโ config.py               # ะะพะฝัะธะณััะฐัะธั ะธะท .env
โ   โโโ db/
โ   โ   โโโ __init__.py
โ   โ   โโโ database.py         # ะะพะดะบะปััะตะฝะธะต ะบ SQLite, ะดะฒะธะถะพะบ
โ   โ   โโโ models.py           # SQLAlchemy-ะผะพะดะตะปะธ (prizes, spins, admins)
โ   โโโ handlers/
โ   โ   โโโ __init__.py
โ   โ   โโโ start.py            # /start โ ะฟัะธะฒะตัััะฒะธะต + ะบะฝะพะฟะบะฐ WebApp
โ   โ   โโโ admin.py            # ะะดะผะธะฝ-ะบะพะผะฐะฝะดั ะฑะพัะฐ
โ   โโโ api/
โ       โโโ __init__.py
โ       โโโ routes.py           # FastAPI-ัะฝะดะฟะพะธะฝัั
โ       โโโ auth.py             # ะะฐะปะธะดะฐัะธั Telegram initData
โ
โโโ nginx/
    โโโ Dockerfile
    โโโ nginx.conf              # ะะพะฝัะธะณ Nginx
```

### Docker-ะบะพะฝัะตะนะฝะตัั

| ะะพะฝัะตะนะฝะตั | ะะฟะธัะฐะฝะธะต | ะะพัั |
|-----------|----------|------|
| `bot` | Python: aiogram 3 + FastAPI | 8000 (ะฒะฝัััะตะฝะฝะธะน) |
| `nginx` | Reverse proxy + ััะฐัะธะบะฐ | 8000 โ 80 (SSL ะฝะฐ Nginx Proxy Manager) |

### ะกัะตะผะฐ ะะ (SQLite)

```mermaid
erDiagram
    prizes {
        INTEGER id PK
        TEXT text
        TEXT icon
        TEXT color
        INTEGER position
        BOOLEAN is_active
        DATETIME created_at
        DATETIME updated_at
    }

    spins {
        INTEGER id PK
        INTEGER tg_user_id UK
        TEXT tg_username
        TEXT tg_first_name
        TEXT tg_last_name
        INTEGER prize_id FK
        TEXT prize_text
        DATETIME created_at
    }

    admins {
        INTEGER id PK
        INTEGER tg_user_id UK
        TEXT role
        INTEGER added_by
        DATETIME created_at
    }

    prizes ||--o{ spins : "ะฒัะฟะฐะป ะฟัะธะท"
```

### API-ัะฝะดะฟะพะธะฝัั (FastAPI)

#### ะัะฑะปะธัะฝัะต (Mini App)

| ะะตัะพะด | URL | ะะฟะธัะฐะฝะธะต |
|:-----:|-----|----------|
| `GET` | `/api/prizes` | ะกะฟะธัะพะบ ะฐะบัะธะฒะฝัั ะฟัะธะทะพะฒ ะดะปั ะบะพะปะตัะฐ |
| `POST` | `/api/spin` | ะัััะธัั ะบะพะปะตัะพ โ ะฒะพะทะฒัะฐัะฐะตั ะฟัะธะท |
| `GET` | `/api/check/{tg_user_id}` | ะัะพะฒะตัะธัั, ะบัััะธะป ะปะธ ะฟะพะปัะทะพะฒะฐัะตะปั |

#### ะะดะผะธะฝัะบะธะต (ััะตะฑััั ะฐะฒัะพัะธะทะฐัะธั)

| ะะตัะพะด | URL | ะะฟะธัะฐะฝะธะต |
|:-----:|-----|----------|
| `GET` | `/api/admin/results` | ะัะต ัะตะทัะปััะฐัั ะฒัะฐัะตะฝะธะน |
| `DELETE` | `/api/admin/results/{id}` | ะฃะดะฐะปะธัั ะทะฐะฟะธัั |
| `POST` | `/api/admin/reset` | ะะพะปะฝัะน ัะฑัะพั ัะตะทัะปััะฐัะพะฒ |
| `GET` | `/api/admin/export` | ะญะบัะฟะพัั ัะตะทัะปััะฐัะพะฒ ะฒ CSV |
| `GET` | `/api/admin/prizes` | ะัะต ะฟัะธะทั (ะฒะบะปััะฐั ะฝะตะฐะบัะธะฒะฝัะต) |
| `POST` | `/api/admin/prizes` | ะะพะฑะฐะฒะธัั ะฟัะธะท |
| `PUT` | `/api/admin/prizes/{id}` | ะะตะดะฐะบัะธัะพะฒะฐัั ะฟัะธะท |
| `DELETE` | `/api/admin/prizes/{id}` | ะฃะดะฐะปะธัั ะฟัะธะท |
| `PUT` | `/api/admin/prizes/reorder` | ะะทะผะตะฝะธัั ะฟะพััะดะพะบ ัะตะบัะพัะพะฒ |
| `GET` | `/api/admin/users` | ะกะฟะธัะพะบ ะฐะดะผะธะฝะพะฒ ะธ ะฟัะพัะผะพัััะธะบะพะฒ |
| `POST` | `/api/admin/users` | ะะพะฑะฐะฒะธัั ะฐะดะผะธะฝะฐ / ะฟัะพัะผะพัััะธะบะฐ |
| `DELETE` | `/api/admin/users/{id}` | ะฃะดะฐะปะธัั ะฐะดะผะธะฝะฐ / ะฟัะพัะผะพัััะธะบะฐ |

> ะัะต ะทะฐะฟัะพัั ะฒะฐะปะธะดะธัััััั ัะตัะตะท Telegram WebApp `initData` (HMAC-SHA256).

### ะะพะผะฐะฝะดั ะฑะพัะฐ

| ะะพะผะฐะฝะดะฐ | ะะพัััะฟ | ะะฟะธัะฐะฝะธะต |
|---------|--------|----------|
| `/start` | ะัะต | ะัะธะฒะตัััะฒะธะต + ะบะฝะพะฟะบะฐ ะพัะบัััะธั Mini App |
| `/admin` | ะะดะผะธะฝ | ะกััะปะบะฐ ะฝะฐ ะฒะตะฑ-ะฐะดะผะธะฝะบั |
| `/results` | ะะดะผะธะฝ, ะัะพัะผะพัััะธะบ | ะัะฐัะบะฐั ัะฒะพะดะบะฐ ัะตะทัะปััะฐัะพะฒ |

---

## โ๏ธ ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

ะคะฐะนะป `.env` (ะฝะต ะฟะพะฟะฐะดะฐะตั ะฒ git). ะจะฐะฑะปะพะฝ โ `.env.example`.

```env
# Telegram
BOT_TOKEN=your_bot_token_here
WEBAPP_URL=https://fortune.demidov.info

# ะะฐัะฐะปัะฝัะต ะฐะดะผะธะฝั (Telegram ID ัะตัะตะท ะทะฐะฟัััั)
ADMIN_IDS=123456789,987654321

# ะะฐะทะฐ ะดะฐะฝะฝัั
DB_PATH=./data/fortune.db

# ะกะตัะฒะตั
API_HOST=0.0.0.0
API_PORT=8000
```

---

## ๐ ะะตะฟะปะพะน

### ะขัะตะฑะพะฒะฐะฝะธั

- Docker + Docker Compose
- ะะพะผะตะฝ ั SSL-ัะตััะธัะธะบะฐัะพะผ (ะดะปั Telegram Mini App ะพะฑัะทะฐัะตะปะตะฝ HTTPS)
- Telegram Bot Token (ัะตัะตะท [@BotFather](https://t.me/BotFather))

### ะะฐะฟััะบ

```bash
git clone https://github.com/wobujidao/fortune-wheel.git
cd fortune-wheel
cp .env.example .env
mcedit .env                   # ะฒะฟะธัะฐัั ัะพะบะตะฝ ะฑะพัะฐ, ID ะฐะดะผะธะฝะพะฒ

docker compose up -d --build
```

### ะะฑะฝะพะฒะปะตะฝะธะต

```bash
cd fortune-wheel
git pull
docker compose up -d --build
```

---

## ๐ ะขะตะบัั ัะฐัััะปะบะธ (ะพั ะบะฐะดัะพะฒะพะน ัะปัะถะฑั)

> ะฃะฒะฐะถะฐะตะผัะต ะผัะถัะธะฝั, ะฒ ะฟัะตะดะดะฒะตัะธะธ 23 ะคะตะฒัะฐะปั ะฟะพะดะณะพัะพะฒะธะปะธ ะดะปั ะฒะฐั ะฟัะฐะทะดะฝะธัะฝะพะต ยซะะพะปะตัะพ ะคะพัััะฝัยป ๐ฎ
>
> ะัััะธัะต ะบะพะปะตัะพ ะธ ะทะฐะฑะธัะฐะนัะต ะณะฐัะฐะฝัะธัะพะฒะฐะฝะฝัะต ะฟะพะดะฐัะบะธ ะฒ ัะตััั ะะฝั ะทะฐัะธัะฝะธะบะฐ ะัะตัะตััะฒะฐ ๐
>
> **ะงัะพ ะผะพะถะฝะพ ะฒัะธะณัะฐัั?**
> - โซ๏ธ ะขััััะฐัะพะฒะพะน ะพะฑะตะดะตะฝะฝัะน ะฟะตัะตััะฒ
> - โซ๏ธ ะะตะฝั ะพัะดััะฐ ะฒ ะฒะฐั ะดะตะฝั ัะพะถะดะตะฝะธั (ะดะพ/ะฟะพัะปะต ะฝะตะณะพ, ะตัะปะธ ะะ ะฒัะฟะฐะดะฐะตั ะฝะฐ ะฒััะพะดะฝะพะน)
> - โซ๏ธ ะะพะทะผะพะถะฝะพััั ะทะฐะฒะตััะธัั ัะฐะฑะพัั ะฝะฐ ะดะฒะฐ ัะฐัะฐ ัะฐะฝััะต
> - โซ๏ธ ะะพะฟะพะปะฝะธัะตะปัะฝัะน ะฒััะพะดะฝะพะน
> - โซ๏ธ ะะพะทะผะพะถะฝะพััั ะฝะฐัะฐัั ัะฐะฑะพัั ะฝะฐ ะดะฒะฐ ัะฐัะฐ ะฟะพะทะถะต
> - โซ๏ธ ะะฐะฒะตััะตะฝะธะต ัะฐะฑะพัั ะฒ ะพะฑะตะด (ะฒ 14:00)
>
> **ะะฐะบ ะฟัะธะฝััั ััะฐััะธะต?** ะัะตะฝั ะฟัะพััะพ:
> - โ๏ธ ะะตัะตัะพะดะธัะต ะฟะพ ัััะปะบะต ะฒ ัะฐั-ะฑะพั ะฆะ ะะ ยซะะพะปะตัะพ ะคะพัััะฝัยป: https://t.me/fortune_cbmo_bot
> - โ๏ธ ะะพะฒะตัััะตัั ััะดัะฑะต
> - โ๏ธ ะัััะธัะต ะบะพะปะตัะพ (ะบะฐะถะดัะน ััะฐััะฝะธะบ ัะผะพะถะตั ะฒัะตะณะพ ะพะดะธะฝ ัะฐะท ะธัะฟััะฐัั ัะดะฐัั)
>
> **ะงัะพ ะดะฐะปััะต?**
> ะั ะผะพะถะตัะต ะฒะพัะฟะพะปัะทะพะฒะฐัััั ะฟะพะดะฐัะบะพะผ ะฒ ะปัะฑะพะน ะดะตะฝั ะดะพ 23 ัะตะฒัะฐะปั ัะปะตะดัััะตะณะพ ะณะพะดะฐ.
> ะะพะถะฐะปัะนััะฐ, ะทะฐัะฐะฝะตะต ัะพะณะปะฐััะนัะต ะดะฐัั/ะฒัะตะผั ัะพ ัะฒะพะธะผ ััะบะพะฒะพะดะธัะตะปะตะผ ๐
>
> ะะพะฒะตะทัั ะบะฐะถะดะพะผั ๐ค ะั ัะพัะฝะพ ะทะฝะฐะตะผ, ััะพ ะฒะฐะผ ัะปัะฑะฝัััั ัะดะฐัะฐ!
>
> ะะพะทะดัะฐะฒะปัะตะผ ะฒัะตั ั ะฝะฐัััะฟะฐััะธะผ ะฟัะฐะทะดะฝะธะบะพะผ!
> *ะะพะผะฐะฝะดะฐ ะบะฐะดัะพะฒะพะน ัะปัะถะฑั ะฆะ* ๐

---

## ๐ ะะฐะถะฝัะต ะทะฐะผะตัะบะธ

- ะะพะปะตัะพ ะฟัะธััะพัะตะฝะพ ะบ 23 ะคะตะฒัะฐะปั โ **ัะพะปัะบะพ ะดะปั ะผัะถัะธะฝ**
- ะะดะธะฝ ะฟะพะปัะทะพะฒะฐัะตะปั = ะพะดะฝะฐ ะฟะพะฟััะบะฐ (ะดะพ ัะฑัะพัะฐ)
- ะัะธะท ะดะตะนััะฒะธัะตะปะตะฝ ะดะพ 23 ัะตะฒัะฐะปั ัะปะตะดัััะตะณะพ ะณะพะดะฐ; ัะพะณะปะฐัะพะฒะฐะฝะธะต ั ััะบะพะฒะพะดะธัะตะปะตะผ ะพะฑัะทะฐัะตะปัะฝะพ
- ะะฐะทะฒะฐะฝะธะต: ยซะะพะปะตัะพ **ะค**ะพัััะฝัยป โ ะคะพัััะฝั ั ะฑะพะปััะพะน ะฑัะบะฒั
- ะัะพะตะบั ัะฐัััะธัะฐะฝ ะฝะฐ ะตะถะตะณะพะดะฝะพะต ะฟะตัะตะธัะฟะพะปัะทะพะฒะฐะฝะธะต โ ะฟัะธะทั, ัะฒะตัะฐ ะธ ัะตะบััั ะฝะฐัััะฐะธะฒะฐัััั ัะตัะตะท ะฐะดะผะธะฝะบั
