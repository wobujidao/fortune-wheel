# üé∞ –ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã ‚Äî –¶–ë –ú–û

Telegram Mini App ‚Äî –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–µ ¬´–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã¬ª –¥–ª—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤ –¶–ë –ú–û (–¶–µ–Ω—Ç—Ä–∞–ª—å–Ω–æ–≥–æ –ë—é–¥–∂–µ—Ç–Ω–æ–≥–æ –£–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ú–æ—Å–∫–æ–≤—Å–∫–æ–π –û–±–ª–∞—Å—Ç–∏) –∫ –ø—Ä–∞–∑–¥–Ω–∏–∫—É 23 –§–µ–≤—Ä–∞–ª—è.

**–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:** https://github.com/wobujidao/fortune-wheel

### –û–ø–∏—Å–∞–Ω–∏–µ
Telegram Mini App, –≤ –∫–æ—Ç–æ—Ä–æ–º —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ –∫—Ä—É—Ç—è—Ç –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã –∏ –ø–æ–ª—É—á–∞—é—Ç –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–æ–¥–∞—Ä–æ–∫ ‚Äî –æ–¥–∏–Ω –∏–∑ –±–æ–Ω—É—Å–æ–≤ –∫ —Ä–∞–±–æ—á–µ–º—É –≥—Ä–∞—Ñ–∏–∫—É. –†–µ–∑—É–ª—å—Ç–∞—Ç –º–æ–∂–Ω–æ –ø–æ–∫–∞–∑–∞—Ç—å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –∏ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–¥–∞—Ä–∫–æ–º –≤ –ª—é–±–æ–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –¥–æ 23 —Ñ–µ–≤—Ä–∞–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞. Telegram-–±–æ—Ç —Å–ª—É–∂–∏—Ç —Ç–æ—á–∫–æ–π –≤—Ö–æ–¥–∞ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Mini App.

- Telegram Mini App: [@cbmo_fortune_bot](https://t.me/cbmo_fortune_bot)

**–ü—Ä–æ–µ–∫—Ç –¥–æ–ª–≥–æ—Å—Ä–æ—á–Ω—ã–π** ‚Äî —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –µ–∂–µ–≥–æ–¥–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é –ø–æ–ª–Ω–æ–≥–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–∏–∑–∞–º–∏, —Å–±—Ä–æ—Å–∞ –∏ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∞–¥–º–∏–Ω–∫—É.

---

## üéÅ –ü—Ä–∏–∑—ã (—Å–µ–∫—Ç–æ—Ä—ã –∫–æ–ª–µ—Å–∞)

–ü—Ä–∏–∑—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ —á–µ—Ä–µ–∑ –≤–µ–±-–∞–¥–º–∏–Ω–∫—É. –î–µ—Ñ–æ–ª—Ç–Ω—ã–π –Ω–∞–±–æ—Ä:

| ‚Ññ | –ü—Ä–∏–∑ | –ò–∫–æ–Ω–∫–∞ | –¶–≤–µ—Ç —Å–µ–∫—Ç–æ—Ä–∞ |
|---|------|--------|-------------|
| 1 | 3-—á–∞—Å–æ–≤–æ–π –ø–µ—Ä–µ—Ä—ã–≤ –Ω–∞ –æ–±–µ–¥ | üçΩÔ∏è | #4A90D9 |
| 2 | –î–µ–Ω—å –æ—Ç–¥—ã—Ö–∞ –≤ –í–∞—à –î–† (–¥–æ/–ø–æ—Å–ª–µ, –µ—Å–ª–∏ –î–† –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–π) | üéÇ | #E8734A |
| 3 | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –Ω–∞ 2 —á–∞—Å–∞ —Ä–∞–Ω—å—à–µ | ‚è∞ | #F5C242 |
| 4 | –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π | üå¥ | #D95B5B |
| 5 | –ù–∞—á–∞–ª–æ —Ä–∞–±–æ—Ç—ã –Ω–∞ 2 —á–∞—Å–∞ –ø–æ–∑–∂–µ | üò¥ | #5BBD8C |
| 6 | –ó–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –≤ –æ–±–µ–¥ (–≤ 14:00) | üè† | #9B6EC5 |

**–í–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç–∏:** –≤—Å–µ —Å–µ–∫—Ç–æ—Ä—ã —Ä–∞–≤–Ω–æ–≤–µ—Ä–æ—è—Ç–Ω—ã.

---

## üìê –¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –∑–∞–¥–∞–Ω–∏–µ

### –û—Å–Ω–æ–≤–Ω–∞—è –º–µ—Ö–∞–Ω–∏–∫–∞
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç –±–æ—Ç–∞ –≤ Telegram ‚Üí –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É ‚Üí –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è Mini App —Å –∫–æ–ª–µ—Å–æ–º
2. –ö–æ–ª–µ—Å–æ —Å—Ç—Ä–æ–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ –ø–æ –¥–∞–Ω–Ω—ã–º –∏–∑ API (`GET /api/prizes`)
3. –ù–∞–∂–∏–º–∞–µ—Ç ¬´–ò—Å–ø—ã—Ç–∞–π —É–¥–∞—á—É!¬ª ‚Üí –∫–æ–ª–µ—Å–æ –∫—Ä—É—Ç–∏—Ç—Å—è —Å –∞–Ω–∏–º–∞—Ü–∏–µ–π ‚Üí –≤—ã–ø–∞–¥–∞–µ—Ç –ø—Ä–∏–∑
4. –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Å –ø–æ–∑–¥—Ä–∞–≤–ª–µ–Ω–∏–µ–º –∏ –Ω–∞–∑–≤–∞–Ω–∏–µ–º –ø—Ä–∏–∑–∞
5. –ü–æ—Å–ª–µ –∑–∞–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª–∫–∏ –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç: –∫–∞–∫–æ–π –ø—Ä–∏–∑ –≤—ã–ø–∞–ª

### –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ–ø—ã—Ç–æ–∫
- **–û–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è** –¥–æ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞
- –ï—Å–ª–∏ —á–µ–ª–æ–≤–µ–∫ —É–∂–µ –∫—Ä—É—Ç–∏–ª ‚Äî –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ ¬´–í—ã —É–∂–µ –∏—Å–ø—ã—Ç–∞–ª–∏ —É–¥–∞—á—É¬ª –∏ –µ–≥–æ –ø—Ä–∏–∑
- –ü–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤—Ä–∞—â–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–Ω–æ **—Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø–æ–ª–Ω–æ–≥–æ —Å–±—Ä–æ—Å–∞** —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É

### –°—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è –ø—Ä–∏–∑–∞
- –ü–æ–¥–∞—Ä–∫–æ–º –º–æ–∂–Ω–æ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –≤ –ª—é–±–æ–π —Ä–∞–±–æ—á–∏–π –¥–µ–Ω—å –¥–æ 23 —Ñ–µ–≤—Ä–∞–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞
- –°–æ—Ç—Ä—É–¥–Ω–∏–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç (—Å–∫—Ä–∏–Ω—à–æ—Ç –∏–∑ –±–æ—Ç–∞) —Å–≤–æ–µ–º—É —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—é –∏ —Å–æ–≥–ª–∞—Å–æ–≤—ã–≤–∞–µ—Ç –¥–∞—Ç—É/–≤—Ä–µ–º—è

### –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
–û–±—è–∑–∞—Ç–µ–ª—å–Ω–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ –ë–î:
- Telegram User ID
- Username (@username)
- –ò–º—è –∏ —Ñ–∞–º–∏–ª–∏—è –∏–∑ Telegram –ø—Ä–æ—Ñ–∏–ª—è
- –í—ã–ø–∞–≤—à–∏–π –ø—Ä–∏–∑ (–Ω–æ–º–µ—Ä –∏ —Ç–µ–∫—Å—Ç)
- –î–∞—Ç–∞ –∏ –≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è

### –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è
- **–ù–µ—Ç –±–µ–ª–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤** ‚Äî –¥–æ—Å—Ç—É–ø —á–µ—Ä–µ–∑ —Å—Å—ã–ª–∫—É –Ω–∞ –±–æ—Ç–∞
- –°—Å—ã–ª–∫—É –Ω–∞ Mini App –ø–æ–ª—É—á–∞—Ç —Ç–æ–ª—å–∫–æ —Å–≤–æ–∏ —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∏ —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–µ –∫–∞–Ω–∞–ª—ã
- –ò–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —á–µ—Ä–µ–∑ Telegram WebApp `initData`

---

## üîß –í–µ–±-–∞–¥–º–∏–Ω–∫–∞

–û—Ç–¥–µ–ª—å–Ω–∞—è –≤–µ–±-—Å—Ç—Ä–∞–Ω–∏—Ü–∞ (`/admin`), –¥–æ—Å—Ç—É–ø –ø–æ Telegram-–∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏.

### –†–æ–ª–∏
- **–ê–¥–º–∏–Ω** ‚Äî –ø–æ–ª–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫–æ –≤—Å–µ–º —Ñ—É–Ω–∫—Ü–∏—è–º
- **–ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫** ‚Äî —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∏–∑–∞–º–∏
- ‚ûï –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–∑ (—Ç–µ–∫—Å—Ç, –∏–∫–æ–Ω–∫–∞-—ç–º–æ–¥–∑–∏, —Ü–≤–µ—Ç)
- ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π –ø—Ä–∏–∑
- üóëÔ∏è –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–∑
- üîÄ –ú–µ–Ω—è—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Å–µ–∫—Ç–æ—Ä–æ–≤ (drag & drop)
- üëÅÔ∏è –ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –∫–æ–ª–µ—Å–∞ —Å —Ç–µ–∫—É—â–∏–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Ç 2 –¥–æ 12 —Å–µ–∫—Ç–æ—Ä–æ–≤

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞–º–∏
- üìä –¢–∞–±–ª–∏—Ü–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (–∫—Ç–æ, —á—Ç–æ, –∫–æ–≥–¥–∞, Telegram-–¥–∞–Ω–Ω—ã–µ)
- üîç –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è
- üóëÔ∏è –£–¥–∞–ª–µ–Ω–∏–µ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö –∑–∞–ø–∏—Å–µ–π
- üîÑ –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å –±–∞–∑—ã (–≤—Å–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –º–æ–≥—É—Ç –∫—Ä—É—Ç–∏—Ç—å –∑–∞–Ω–æ–≤–æ)
- üì• –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ CSV

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ—Å—Ç—É–ø–æ–º
- üë§ –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤ (–ø–æ Telegram ID)
- üëÅÔ∏è –î–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤ (–ø–æ Telegram ID)
- –°–ø–∏—Å–æ–∫ —Ç–µ–∫—É—â–∏—Ö –∞–¥–º–∏–Ω–æ–≤ –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤

---

## üé® –î–∏–∑–∞–π–Ω –∫–æ–ª–µ—Å–∞

- –¢—ë–º–Ω—ã–π —Ñ–æ–Ω —Å –º–µ—Ä—Ü–∞—é—â–∏–º–∏ –∑–≤—ë–∑–¥–∞–º–∏
- –ö–æ–ª–µ—Å–æ —Å —Ü–≤–µ—Ç–Ω—ã–º–∏ —Å–µ–∫—Ç–æ—Ä–∞–º–∏, –Ω–æ–º–µ—Ä–∞ –≤ –±–µ–ª—ã—Ö –∫—Ä—É–∂–∫–∞—Ö
- –ö—Ä–∞—Å–Ω–∞—è –æ–∫–∞–Ω—Ç–æ–≤–∫–∞ —Å –º–∏–≥–∞—é—â–∏–º–∏ –ª–∞–º–ø–æ—á–∫–∞–º–∏ (–±–µ–≥—É—â–∏–π –æ–≥–æ–Ω—å)
- –ó–æ–ª–æ—Ç–æ–π —Ü–µ–Ω—Ç—Ä–∞–ª—å–Ω—ã–π —Ö–∞–±
- –ó–æ–ª–æ—Ç–∞—è —Å—Ç—Ä–µ–ª–∫–∞-—É–∫–∞–∑–∞—Ç–µ–ª—å —Å–≤–µ—Ä—Ö—É (–æ—Å—Ç—Ä–∏–µ –∫ —Ü–µ–Ω—Ç—Ä—É)
- –õ–µ–≥–µ–Ω–¥–∞ —Å —Ä–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–æ–π –Ω–æ–º–µ—Ä–æ–≤ –ø–æ–¥ –∫–æ–ª–µ—Å–æ–º
- –ö–æ–Ω—Ñ–µ—Ç—Ç–∏ –ø—Ä–∏ –≤—ã–∏–≥—Ä—ã—à–µ
- –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π –¥–∏–∑–∞–π–Ω –ø–æ–¥ –º–æ–±–∏–ª—å–Ω—ã–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- –ö–æ–ª–µ—Å–æ —Å—Ç—Ä–æ–∏—Ç—Å—è –¥–∏–Ω–∞–º–∏—á–µ—Å–∫–∏ ‚Äî –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–µ–∫—Ç–æ—Ä–æ–≤, —Ü–≤–µ—Ç–∞, —Ç–µ–∫—Å—Ç—ã –∏–∑ API

---

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **Frontend:** HTML5 + CSS3 + JavaScript (Canvas API –¥–ª—è –∫–æ–ª–µ—Å–∞)
- **Backend:** Python 3.13+
- **Telegram Bot:** aiogram 3.x
- **API:** FastAPI (—Å Pydantic v2)
- **–ë–î:** SQLite (—á–µ—Ä–µ–∑ aiosqlite + SQLAlchemy 2.0 async)
- **Web-—Å–µ—Ä–≤–µ—Ä:** Nginx (reverse proxy + SSL + —Å—Ç–∞—Ç–∏–∫–∞)
- **–î–µ–ø–ª–æ–π:** Docker + Docker Compose
- **–í–∞–ª–∏–¥–∞—Ü–∏—è:** Telegram WebApp initData (HMAC-SHA256)
- **–§–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** Ruff (linter + formatter)
- **–¢–∏–ø–∏–∑–∞—Ü–∏—è:** –ø–æ–ª–Ω–∞—è –∞–Ω–Ω–æ—Ç–∞—Ü–∏—è —Ç–∏–ø–æ–≤

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
```
fortune-wheel/
‚îú‚îÄ‚îÄ docker-compose.yml
‚îú‚îÄ‚îÄ .env                      # –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (–Ω–µ –≤ git)
‚îú‚îÄ‚îÄ .env.example              # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
‚îú‚îÄ‚îÄ README.md
‚îÇ
‚îú‚îÄ‚îÄ frontend/
‚îÇ   ‚îú‚îÄ‚îÄ index.html            # Mini App ‚Äî –∫–æ–ª–µ—Å–æ —Ñ–æ—Ä—Ç—É–Ω—ã
‚îÇ   ‚îî‚îÄ‚îÄ admin.html            # –í–µ–±-–∞–¥–º–∏–Ω–∫–∞
‚îÇ
‚îú‚îÄ‚îÄ bot/
‚îÇ   ‚îú‚îÄ‚îÄ Dockerfile
‚îÇ   ‚îú‚îÄ‚îÄ requirements.txt
‚îÇ   ‚îú‚îÄ‚îÄ main.py               # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–±–æ—Ç + FastAPI)
‚îÇ   ‚îú‚îÄ‚îÄ config.py             # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏–∑ .env
‚îÇ   ‚îú‚îÄ‚îÄ db/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ database.py       # –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ SQLite, –¥–≤–∏–∂–æ–∫
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ models.py         # SQLAlchemy –º–æ–¥–µ–ª–∏ (prizes, spins, admins)
‚îÇ   ‚îú‚îÄ‚îÄ handlers/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ start.py          # /start ‚Äî –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + WebApp –∫–Ω–æ–ø–∫–∞
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ admin.py          # –ê–¥–º–∏–Ω-–∫–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞
‚îÇ   ‚îî‚îÄ‚îÄ api/
‚îÇ       ‚îú‚îÄ‚îÄ __init__.py
‚îÇ       ‚îú‚îÄ‚îÄ routes.py         # FastAPI —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã
‚îÇ       ‚îî‚îÄ‚îÄ auth.py           # –í–∞–ª–∏–¥–∞—Ü–∏—è Telegram initData
‚îÇ
‚îî‚îÄ‚îÄ nginx/
    ‚îú‚îÄ‚îÄ Dockerfile
    ‚îî‚îÄ‚îÄ nginx.conf            # –ö–æ–Ω—Ñ–∏–≥ Nginx
```

### Docker-–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
| –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä | –û–ø–∏—Å–∞–Ω–∏–µ | –ü–æ—Ä—Ç |
|-----------|----------|------|
| `bot` | Python: aiogram 3 + FastAPI | 8000 (–≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π) |
| `nginx` | Reverse proxy + SSL + —Å—Ç–∞—Ç–∏–∫–∞ | 80, 443 |

### –°—Ö–µ–º–∞ –ë–î (SQLite)

**–¢–∞–±–ª–∏—Ü–∞ `prizes`** ‚Äî –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ø—Ä–∏–∑—ã:
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | –ê–≤—Ç–æ ID |
| text | TEXT | –¢–µ–∫—Å—Ç –ø—Ä–∏–∑–∞ |
| icon | TEXT | –≠–º–æ–¥–∑–∏-–∏–∫–æ–Ω–∫–∞ |
| color | TEXT | HEX-—Ü–≤–µ—Ç —Å–µ–∫—Ç–æ—Ä–∞ |
| position | INTEGER | –ü–æ—Ä—è–¥–æ–∫ –Ω–∞ –∫–æ–ª–µ—Å–µ |
| is_active | BOOLEAN | –í–∫–ª—é—á—ë–Ω/–≤—ã–∫–ª—é—á–µ–Ω |
| created_at | DATETIME | –î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è |
| updated_at | DATETIME | –î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è |

**–¢–∞–±–ª–∏—Ü–∞ `spins`** ‚Äî —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—Ä–∞—â–µ–Ω–∏–π:
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | –ê–≤—Ç–æ ID |
| tg_user_id | INTEGER UNIQUE | Telegram User ID |
| tg_username | TEXT | @username |
| tg_first_name | TEXT | –ò–º—è |
| tg_last_name | TEXT | –§–∞–º–∏–ª–∏—è |
| prize_id | INTEGER FK | –°—Å—ã–ª–∫–∞ –Ω–∞ –ø—Ä–∏–∑ |
| prize_text | TEXT | –¢–µ–∫—Å—Ç –ø—Ä–∏–∑–∞ (—Å–Ω–∏–º–æ–∫ –Ω–∞ –º–æ–º–µ–Ω—Ç –≤—Ä–∞—â–µ–Ω–∏—è) |
| created_at | DATETIME | –î–∞—Ç–∞/–≤—Ä–µ–º—è –≤—Ä–∞—â–µ–Ω–∏—è |

**–¢–∞–±–ª–∏—Ü–∞ `admins`** ‚Äî –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä—ã –∏ –ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∏:
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|------|-----|----------|
| id | INTEGER PK | –ê–≤—Ç–æ ID |
| tg_user_id | INTEGER UNIQUE | Telegram User ID |
| role | TEXT | 'admin' –∏–ª–∏ 'viewer' |
| added_by | INTEGER | –ö—Ç–æ –¥–æ–±–∞–≤–∏–ª |
| created_at | DATETIME | –î–∞—Ç–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è |

### API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã (FastAPI)

**–ü—É–±–ª–∏—á–Ω—ã–µ (Mini App):**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/api/prizes` | –°–ø–∏—Å–æ–∫ –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø—Ä–∏–∑–æ–≤ (–¥–ª—è –∫–æ–ª–µ—Å–∞) |
| POST | `/api/spin` | –ö—Ä—É—Ç–∏—Ç—å –∫–æ–ª–µ—Å–æ (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø—Ä–∏–∑) |
| GET | `/api/check/{tg_user_id}` | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –∫—Ä—É—Ç–∏–ª –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å |

**–ê–¥–º–∏–Ω—Å–∫–∏–µ (—Ç—Ä–µ–±—É—é—Ç –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é):**
| –ú–µ—Ç–æ–¥ | URL | –û–ø–∏—Å–∞–Ω–∏–µ |
|-------|-----|----------|
| GET | `/api/admin/results` | –í—Å–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã |
| DELETE | `/api/admin/results/{id}` | –£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å |
| POST | `/api/admin/reset` | –ü–æ–ª–Ω—ã–π —Å–±—Ä–æ—Å |
| GET | `/api/admin/export` | –≠–∫—Å–ø–æ—Ä—Ç CSV |
| GET | `/api/admin/prizes` | –í—Å–µ –ø—Ä–∏–∑—ã (–≤–∫–ª. –Ω–µ–∞–∫—Ç–∏–≤–Ω—ã–µ) |
| POST | `/api/admin/prizes` | –î–æ–±–∞–≤–∏—Ç—å –ø—Ä–∏–∑ |
| PUT | `/api/admin/prizes/{id}` | –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–∏–∑ |
| DELETE | `/api/admin/prizes/{id}` | –£–¥–∞–ª–∏—Ç—å –ø—Ä–∏–∑ |
| PUT | `/api/admin/prizes/reorder` | –ò–∑–º–µ–Ω–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ |
| GET | `/api/admin/users` | –°–ø–∏—Å–æ–∫ –∞–¥–º–∏–Ω–æ–≤/–ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–æ–≤ |
| POST | `/api/admin/users` | –î–æ–±–∞–≤–∏—Ç—å –∞–¥–º–∏–Ω–∞/–ø—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫–∞ |
| DELETE | `/api/admin/users/{id}` | –£–¥–∞–ª–∏—Ç—å |

–í—Å–µ API-–∑–∞–ø—Ä–æ—Å—ã –≤–∞–ª–∏–¥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ Telegram WebApp `initData` (HMAC-SHA256).

### –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

| –ö–æ–º–∞–Ω–¥–∞ | –î–æ—Å—Ç—É–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
|---------|--------|----------|
| `/start` | –í—Å–µ | –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ + –∫–Ω–æ–ø–∫–∞ Mini App |
| `/admin` | –ê–¥–º–∏–Ω | –°—Å—ã–ª–∫–∞ –Ω–∞ –≤–µ–±-–∞–¥–º–∏–Ω–∫—É |
| `/results` | –ê–¥–º–∏–Ω, –ü—Ä–æ—Å–º–æ—Ç—Ä—â–∏–∫ | –ö—Ä–∞—Ç–∫–∞—è —Å–≤–æ–¥–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ |

---

## ‚öôÔ∏è –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)

```env
# Telegram
BOT_TOKEN=your_bot_token_here
WEBAPP_URL=https://your-domain.ru

# –ù–∞—á–∞–ª—å–Ω—ã–µ –∞–¥–º–∏–Ω—ã (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
ADMIN_IDS=123456789,987654321

# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
DB_PATH=./data/fortune.db

# –°–µ—Ä–≤–µ—Ä
API_HOST=0.0.0.0
API_PORT=8000
```

---

## üöÄ –î–µ–ø–ª–æ–π

### –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è
- Docker + Docker Compose
- –î–æ–º–µ–Ω —Å SSL-—Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç–æ–º (–¥–ª—è Telegram WebApp –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω HTTPS)
- Telegram Bot Token (—á–µ—Ä–µ–∑ @BotFather)

### –ó–∞–ø—É—Å–∫
```bash
git clone https://github.com/wobujidao/fortune-wheel.git
cd fortune-wheel
cp .env.example .env
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å .env ‚Äî –≤–ø–∏—Å–∞—Ç—å —Ç–æ–∫–µ–Ω –±–æ—Ç–∞, –¥–æ–º–µ–Ω, ID –∞–¥–º–∏–Ω–æ–≤
mcedit .env

docker-compose up -d --build
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ
```bash
git pull
docker-compose up -d --build
```

---

## üìù –¢–µ–∫—Å—Ç —Ä–∞—Å—Å—ã–ª–∫–∏ (–æ—Ç –∫–∞–¥—Ä–æ–≤–æ–π —Å–ª—É–∂–±—ã)

> –£–≤–∞–∂–∞–µ–º—ã–µ –º—É–∂—á–∏–Ω—ã, –≤ –ø—Ä–µ–¥–¥–≤–µ—Ä–∏–∏ 23 –§–µ–≤—Ä–∞–ª—è –ø–æ–¥–≥–æ—Ç–æ–≤–∏–ª–∏ –¥–ª—è –í–∞—Å –ø—Ä–∞–∑–¥–Ω–∏—á–Ω–æ–µ ¬´–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã¬ª üîÆ
>
> –ö—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ –∏ –∑–∞–±–∏—Ä–∞–π—Ç–µ –≥–∞—Ä–∞–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–æ–¥–∞—Ä–∫–∏ –≤ —á–µ—Å—Ç—å –î–Ω—è –∑–∞—â–∏—Ç–Ω–∏–∫–∞ –û—Ç–µ—á–µ—Å—Ç–≤–∞ üéÅ
>
> –ß—Ç–æ –º–æ–∂–Ω–æ –≤—ã–∏–≥—Ä–∞—Ç—å?
> ‚ñ´Ô∏è —Ç—Ä—ë—Ö—á–∞—Å–æ–≤–æ–π –æ–±–µ–¥–µ–Ω–Ω—ã–π –ø–µ—Ä–µ—Ä—ã–≤
> ‚ñ´Ô∏è –¥–µ–Ω—å –æ—Ç–¥—ã—Ö–∞ –≤ –í–∞—à –î–µ–Ω—å —Ä–æ–∂–¥–µ–Ω–∏—è (–¥–æ/–ø–æ—Å–ª–µ –Ω–µ–≥–æ, –µ—Å–ª–∏ –î–† –≤—ã–ø–∞–¥–∞–µ—Ç –Ω–∞ –≤—ã—Ö–æ–¥–Ω–æ–π)
> ‚ñ´Ô∏è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –∑–∞–≤–µ—Ä—à–∏—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –¥–≤–∞ —á–∞—Å–∞ —Ä–∞–Ω—å—à–µ
> ‚ñ´Ô∏è –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π –≤—ã—Ö–æ–¥–Ω–æ–π
> ‚ñ´Ô∏è –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –Ω–∞—á–∞—Ç—å —Ä–∞–±–æ—Ç—É –Ω–∞ –¥–≤–∞ —á–∞—Å–∞ –ø–æ–∑–∂–µ
> ‚ñ´Ô∏è –∑–∞–≤–µ—Ä—à–µ–Ω–∏–µ —Ä–∞–±–æ—Ç—ã –≤ –æ–±–µ–¥ (–≤ 14:00)
>
> –ö–∞–∫ –ø—Ä–∏–Ω—è—Ç—å —É—á–∞—Å—Ç–∏–µ? –û—á–µ–Ω—å –ø—Ä–æ—Å—Ç–æ:
> ‚úîÔ∏è –ø–µ—Ä–µ—Ö–æ–¥–∏—Ç–µ –ø–æ —Å—Å—ã–ª–∫–µ –≤ —á–∞—Ç-–±–æ—Ç –¶–ë –ú–û ¬´–ö–æ–ª–µ—Å–æ –§–æ—Ä—Ç—É–Ω—ã¬ª (https://t.me/cbmo_fortune_bot)
> ‚úîÔ∏è –¥–æ–≤–µ—Ä—å—Ç–µ—Å—å —Å—É–¥—å–±–µ
> ‚úîÔ∏è –∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–æ (–∫–∞–∂–¥—ã–π —É—á–∞—Å—Ç–Ω–∏–∫ —Å–º–æ–∂–µ—Ç –≤—Å–µ–≥–æ –æ–¥–∏–Ω —Ä–∞–∑ –∏—Å–ø—ã—Ç–∞—Ç—å —É–¥–∞—á—É)
>
> –ß—Ç–æ –¥–∞–ª—å—à–µ?
> –í—ã –º–æ–∂–µ—Ç–µ –≤–æ—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å—Å—è –ø–æ–¥–∞—Ä–∫–æ–º –≤ –ª—é–±–æ–π –¥–µ–Ω—å –¥–æ 23 —Ñ–µ–≤—Ä–∞–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞.
> –ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –∑–∞—Ä–∞–Ω–µ–µ —Å–æ–≥–ª–∞—Å—É–π—Ç–µ –¥–∞—Ç—É/–≤—Ä–µ–º—è —Å–æ —Å–≤–æ–∏–º —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º üòâ
>
> –ü–æ–≤–µ–∑—ë—Ç –∫–∞–∂–¥–æ–º—É ü§ù –ú—ã —Ç–æ—á–Ω–æ –∑–Ω–∞–µ–º, —á—Ç–æ –í–∞–º —É–ª—ã–±–Ω—ë—Ç—Å—è —É–¥–∞—á–∞!
>
> –ü–æ–∑–¥—Ä–∞–≤–ª—è–µ–º –≤—Å–µ—Ö —Å –Ω–∞—Å—Ç—É–ø–∞—é—â–∏–º –ø—Ä–∞–∑–¥–Ω–∏–∫–æ–º!
> –ö–æ–º–∞–Ω–¥–∞ –∫–∞–¥—Ä–æ–≤–æ–π —Å–ª—É–∂–±—ã –¶–ë üíõ

---

## üìå –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏

- –ö–æ–ª–µ—Å–æ ‚Äî **—Ç–æ–ª—å–∫–æ –¥–ª—è –º—É–∂—á–∏–Ω** (–ø—Ä–∏—É—Ä–æ—á–µ–Ω–æ –∫ 23 –§–µ–≤—Ä–∞–ª—è)
- –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å = –æ–¥–Ω–∞ –ø–æ–ø—ã—Ç–∫–∞ (–¥–æ —Å–±—Ä–æ—Å–∞)
- –ü—Ä–∏–∑ –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω –¥–æ 23 —Ñ–µ–≤—Ä–∞–ª—è —Å–ª–µ–¥—É—é—â–µ–≥–æ –≥–æ–¥–∞, —Å–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∏–µ —Å —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª–µ–º –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ
- –ù–∞–∑–≤–∞–Ω–∏–µ: ¬´–ö–æ–ª–µ—Å–æ **–§**–æ—Ä—Ç—É–Ω—ã¬ª ‚Äî –§–æ—Ä—Ç—É–Ω—ã —Å –±–æ–ª—å—à–æ–π –±—É–∫–≤—ã
- –ü—Ä–æ–µ–∫—Ç —Ä–∞—Å—Å—á–∏—Ç–∞–Ω –Ω–∞ –µ–∂–µ–≥–æ–¥–Ω–æ–µ –ø–µ—Ä–µ–∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ ‚Äî –ø—Ä–∏–∑—ã, —Ü–≤–µ—Ç–∞, —Ç–µ–∫—Å—Ç—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞–¥–º–∏–Ω–∫—É